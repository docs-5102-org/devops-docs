import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as e,o as n}from"./app-aR2NjaSw.js";const h={};function l(d,s){return n(),a("div",null,s[0]||(s[0]=[e(`<h1 id="linux-du-命令详细指南" tabindex="-1"><a class="header-anchor" href="#linux-du-命令详细指南"><span>Linux du 命令详细指南</span></a></h1><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p><code>du</code> 命令用于查询文件或目录的磁盘使用空间。与 <code>df</code> 不同的是，Linux du 命令是对文件和目录磁盘使用空间的查看，统计的是文件和目录实际占用的磁盘空间。</p><h2 id="语法格式" tabindex="-1"><a class="header-anchor" href="#语法格式"><span>语法格式</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">du</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [参数] [目录/文件]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="常用选项" tabindex="-1"><a class="header-anchor" href="#常用选项"><span>常用选项</span></a></h2><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td><code>-a</code></td><td>显示全部目录和其次目录下的每个文件所占的磁盘空间</td></tr><tr><td><code>-b</code></td><td>大小用 bytes 来表示（默认值为 k bytes）</td></tr><tr><td><code>-c</code></td><td>最后再加上总计（默认值）</td></tr><tr><td><code>-h</code></td><td>以人类可读的格式显示大小（K、M、G）</td></tr><tr><td><code>-s</code></td><td>只显示各文件大小的总合，不显示子目录</td></tr><tr><td><code>-x</code></td><td>只计算同属同一个文件系统的文件</td></tr><tr><td><code>-L</code></td><td>计算所有的文件大小</td></tr><tr><td><code>-d N</code></td><td>显示目录深度为 N 层</td></tr><tr><td><code>--max-depth=N</code></td><td>同 <code>-d N</code></td></tr></tbody></table><h2 id="实用示例" tabindex="-1"><a class="header-anchor" href="#实用示例"><span>实用示例</span></a></h2><h3 id="_1-基本用法-以kb为单位显示" tabindex="-1"><a class="header-anchor" href="#_1-基本用法-以kb为单位显示"><span>1. 基本用法 - 以KB为单位显示</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">du</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-人类可读格式-以m为单位显示" tabindex="-1"><a class="header-anchor" href="#_2-人类可读格式-以m为单位显示"><span>2. 人类可读格式 - 以M为单位显示</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">du</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -h</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-显示指定目录的详细信息" tabindex="-1"><a class="header-anchor" href="#_3-显示指定目录的详细信息"><span>3. 显示指定目录的详细信息</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">du</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -h</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>输出示例：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>104K /etc/defaults</span></span>
<span class="line"><span>6.0K /etc/X11</span></span>
<span class="line"><span>8.0K /etc/bluetooth</span></span>
<span class="line"><span>4.0K /etc/gnats</span></span>
<span class="line"><span>52K /etc/isdn</span></span>
<span class="line"><span>388K /etc/mail</span></span>
<span class="line"><span>68K /etc/mtree</span></span>
<span class="line"><span>2.0K /etc/ntp</span></span>
<span class="line"><span>38K /etc/pam.d</span></span>
<span class="line"><span>44K /etc/periodic/daily</span></span>
<span class="line"><span>6.0K /etc/periodic/monthly</span></span>
<span class="line"><span>42K /etc/periodic/security</span></span>
<span class="line"><span>16K /etc/periodic/weekly</span></span>
<span class="line"><span>110K /etc/periodic</span></span>
<span class="line"><span>6.0K /etc/ppp</span></span>
<span class="line"><span>318K /etc/rc.d</span></span>
<span class="line"><span>2.0K /etc/skel</span></span>
<span class="line"><span>130K /etc/ssh</span></span>
<span class="line"><span>10K /etc/ssl</span></span>
<span class="line"><span>1.7M /etc</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-只显示目录总计大小" tabindex="-1"><a class="header-anchor" href="#_4-只显示目录总计大小"><span>4. 只显示目录总计大小</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">du</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -sh</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>输出：<code>1.7M /etc</code></p><h3 id="_5-显示当前目录的总大小" tabindex="-1"><a class="header-anchor" href="#_5-显示当前目录的总大小"><span>5. 显示当前目录的总大小</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">du</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -sh</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> .</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_6-显示目录下各子目录的大小" tabindex="-1"><a class="header-anchor" href="#_6-显示目录下各子目录的大小"><span>6. 显示目录下各子目录的大小</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">du</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -h</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --max-depth=1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_7-显示所有文件的大小" tabindex="-1"><a class="header-anchor" href="#_7-显示所有文件的大小"><span>7. 显示所有文件的大小</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">du</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /home/user</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_8-按大小排序查看目录使用情况" tabindex="-1"><a class="header-anchor" href="#_8-按大小排序查看目录使用情况"><span>8. 按大小排序查看目录使用情况</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">du</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sort</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -nr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">more</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>输出示例：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>1746 /etc</span></span>
<span class="line"><span>388 /etc/mail</span></span>
<span class="line"><span>318 /etc/rc.d</span></span>
<span class="line"><span>130 /etc/ssh</span></span>
<span class="line"><span>110 /etc/periodic</span></span>
<span class="line"><span>104 /etc/defaults</span></span>
<span class="line"><span>68 /etc/mtree</span></span>
<span class="line"><span>52 /etc/isdn</span></span>
<span class="line"><span>44 /etc/periodic/daily</span></span>
<span class="line"><span>42 /etc/periodic/security</span></span>
<span class="line"><span>38 /etc/pam.d</span></span>
<span class="line"><span>16 /etc/periodic/weekly</span></span>
<span class="line"><span>10 /etc/ssl</span></span>
<span class="line"><span>8 /etc/bluetooth</span></span>
<span class="line"><span>6 /etc/ppp</span></span>
<span class="line"><span>6 /etc/periodic/monthly</span></span>
<span class="line"><span>6 /etc/X11</span></span>
<span class="line"><span>4 /etc/gnats</span></span>
<span class="line"><span>2 /etc/skel</span></span>
<span class="line"><span>2 /etc/ntp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>注意</strong>：使用 <code>sort -nr</code> 参数表示以数字排序法进行反向排序。由于需要对目录大小进行排序，不能使用 <code>-h</code> 参数（human-readable 格式），否则输出中的 K、M 等字符会造成排序不正确。</p></blockquote><h2 id="常用组合命令" tabindex="-1"><a class="header-anchor" href="#常用组合命令"><span>常用组合命令</span></a></h2><h3 id="_1-查找占用空间最大的目录-推荐方法" tabindex="-1"><a class="header-anchor" href="#_1-查找占用空间最大的目录-推荐方法"><span>1. 查找占用空间最大的目录（推荐方法）</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">du</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -h</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --max-depth=1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sort</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -hr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">head</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -10</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-查找占用空间最大的目录-数字排序" tabindex="-1"><a class="header-anchor" href="#_2-查找占用空间最大的目录-数字排序"><span>2. 查找占用空间最大的目录（数字排序）</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">du</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --max-depth=1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sort</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -nr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">head</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -10</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-查找大于指定大小的文件" tabindex="-1"><a class="header-anchor" href="#_3-查找大于指定大小的文件"><span>3. 查找大于指定大小的文件</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">find</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> f</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -size</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +100M</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -exec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> du</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -h</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {}</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 2&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/dev/null</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-查看目录下文件数量" tabindex="-1"><a class="header-anchor" href="#_4-查看目录下文件数量"><span>4. 查看目录下文件数量</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">find</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /path/to/directory</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wc</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -l</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_5-实时监控目录大小变化" tabindex="-1"><a class="header-anchor" href="#_5-实时监控目录大小变化"><span>5. 实时监控目录大小变化</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">watch</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;du -sh /var/log&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="高级应用技巧" tabindex="-1"><a class="header-anchor" href="#高级应用技巧"><span>高级应用技巧</span></a></h2><h3 id="_1-排除特定目录" tabindex="-1"><a class="header-anchor" href="#_1-排除特定目录"><span>1. 排除特定目录</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">du</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -h</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --max-depth=1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --exclude=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;*.log&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-只统计特定类型文件" tabindex="-1"><a class="header-anchor" href="#_2-只统计特定类型文件"><span>2. 只统计特定类型文件</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">du</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ch</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --max-depth=1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /home/user/</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-按修改时间过滤文件" tabindex="-1"><a class="header-anchor" href="#_3-按修改时间过滤文件"><span>3. 按修改时间过滤文件</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">find</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var/log</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;*.log&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -mtime</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -exec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> du</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {}</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-生成磁盘使用报告" tabindex="-1"><a class="header-anchor" href="#_4-生成磁盘使用报告"><span>4. 生成磁盘使用报告</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">du</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -h</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /home</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sort</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -hr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">disk_usage_report.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="注意事项" tabindex="-1"><a class="header-anchor" href="#注意事项"><span>注意事项</span></a></h2><ol><li><p><strong>性能考虑</strong>：在大型文件系统上使用 <code>du</code> 命令可能需要较长时间，建议在系统负载较低时执行。</p></li><li><p><strong>权限问题</strong>：某些系统目录可能需要 root 权限才能查看完整信息。</p></li><li><p><strong>单位换算</strong>：建议使用 <code>-h</code> 参数进行单位换算，135MB 比 138240KB 更容易阅读。</p></li><li><p><strong>排序注意事项</strong>：</p><ul><li>使用 <code>sort -hr</code> 可以对带有 K、M、G 单位的输出进行正确排序</li><li>使用 <code>sort -nr</code> 适用于纯数字的排序，不能与 <code>-h</code> 参数同时使用</li><li>要按大小排序时，选择合适的排序方式很重要</li></ul></li><li><p><strong>与 df 的区别</strong>：du 统计文件和目录的实际使用空间，而 df 显示文件系统级别的空间使用情况。已删除但仍被进程占用的文件会在 df 中显示占用空间，但在 du 中不会显示。</p></li></ol><h2 id="常见问题解决" tabindex="-1"><a class="header-anchor" href="#常见问题解决"><span>常见问题解决</span></a></h2><h3 id="问题1-du-和-df-显示结果不一致" tabindex="-1"><a class="header-anchor" href="#问题1-du-和-df-显示结果不一致"><span>问题1：du 和 df 显示结果不一致</span></a></h3><p><strong>原因</strong>：可能存在已删除但仍被进程占用的文件<br><strong>解决</strong>：使用 <code>lsof +L1</code> 查看被删除但仍打开的文件</p><h3 id="问题2-du-命令运行很慢" tabindex="-1"><a class="header-anchor" href="#问题2-du-命令运行很慢"><span>问题2：du 命令运行很慢</span></a></h3><p><strong>原因</strong>：目录层级深或文件数量多<br><strong>解决</strong>：使用 <code>--max-depth</code> 限制深度，或在系统负载低时运行</p><h3 id="问题3-权限不足无法查看某些目录" tabindex="-1"><a class="header-anchor" href="#问题3-权限不足无法查看某些目录"><span>问题3：权限不足无法查看某些目录</span></a></h3><p><strong>原因</strong>：普通用户权限不够<br><strong>解决</strong>：使用 <code>sudo</code> 或切换到 root 用户</p><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><p>du 命令是 Linux 系统管理中不可或缺的工具，通过合理使用各种参数和组合命令，可以有效地监控和管理磁盘空间使用情况。掌握 du 命令的各种用法，对于系统维护和故障排查都有重要意义。</p>`,61)]))}const p=i(h,[["render",l]]),k=JSON.parse(`{"path":"/linux/%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/du.html","title":"du命令-查询磁盘使用空间","lang":"zh-CN","frontmatter":{"title":"du命令-查询磁盘使用空间","category":["Linux","磁盘管理"],"tag":["磁盘管理","Linux命令","du命令"],"date":"2022-08-29T00:00:00.000Z","description":"Linux du 命令详细指南 概述 du 命令用于查询文件或目录的磁盘使用空间。与 df 不同的是，Linux du 命令是对文件和目录磁盘使用空间的查看，统计的是文件和目录实际占用的磁盘空间。 语法格式 常用选项 实用示例 1. 基本用法 - 以KB为单位显示 2. 人类可读格式 - 以M为单位显示 3. 显示指定目录的详细信息 输出示例： 4. ...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"du命令-查询磁盘使用空间\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-08-29T00:00:00.000Z\\",\\"dateModified\\":\\"2025-07-09T15:12:33.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"tuonioooo\\",\\"url\\":\\"/\\"}]}"],["meta",{"property":"og:url","content":"https://mister-hope.github.io/linux/%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/du.html"}],["meta",{"property":"og:site_name","content":"tuonioooo's DevOps Docs"}],["meta",{"property":"og:title","content":"du命令-查询磁盘使用空间"}],["meta",{"property":"og:description","content":"Linux du 命令详细指南 概述 du 命令用于查询文件或目录的磁盘使用空间。与 df 不同的是，Linux du 命令是对文件和目录磁盘使用空间的查看，统计的是文件和目录实际占用的磁盘空间。 语法格式 常用选项 实用示例 1. 基本用法 - 以KB为单位显示 2. 人类可读格式 - 以M为单位显示 3. 显示指定目录的详细信息 输出示例： 4. ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-07-09T15:12:33.000Z"}],["meta",{"property":"article:tag","content":"du命令"}],["meta",{"property":"article:tag","content":"Linux命令"}],["meta",{"property":"article:tag","content":"磁盘管理"}],["meta",{"property":"article:published_time","content":"2022-08-29T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-07-09T15:12:33.000Z"}]]},"git":{"createdTime":1752073953000,"updatedTime":1752073953000,"contributors":[{"name":"tuonioooo","username":"tuonioooo","email":"daizhaoman@sina.com","commits":1,"url":"https://github.com/tuonioooo"}]},"readingTime":{"minutes":3.97,"words":1191},"filePathRelative":"linux/磁盘管理/du.md","excerpt":"\\n<h2>概述</h2>\\n<p><code>du</code> 命令用于查询文件或目录的磁盘使用空间。与 <code>df</code> 不同的是，Linux du 命令是对文件和目录磁盘使用空间的查看，统计的是文件和目录实际占用的磁盘空间。</p>\\n<h2>语法格式</h2>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code class=\\"language-bash\\"><span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">du</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> [参数] [目录/文件]</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>","autoDesc":true}`);export{p as comp,k as data};
