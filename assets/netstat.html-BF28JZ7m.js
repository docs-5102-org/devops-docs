import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as n,o as h}from"./app-aR2NjaSw.js";const t={};function l(e,s){return h(),a("div",null,s[0]||(s[0]=[n(`<h1 id="netstat命令-网络监控" tabindex="-1"><a class="header-anchor" href="#netstat命令-网络监控"><span>netstat命令-网络监控</span></a></h1><h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p>Netstat 命令是 Linux 系统中最重要的网络监测工具之一，用于显示各种网络相关信息，如网络连接、路由表、接口状态（Interface Statistics）、masquerade 连接、多播成员（Multicast Memberships）等。对于网络管理员和系统运维人员来说，掌握 netstat 命令是必不可少的技能。</p><h2 id="输出信息含义" tabindex="-1"><a class="header-anchor" href="#输出信息含义"><span>输出信息含义</span></a></h2><p>执行 netstat 后，其输出结果为：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Active</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Internet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connections</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (w/o </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">servers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Recv-Q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Send-Q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Local</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">           Foreign</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         State</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 210.34.6.89:telnet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     210.34.6.96:2873</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        ESTABLISHED</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      296</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 210.34.6.89:1165</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       210.34.6.84:netbios-ssn</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ESTABLISHED</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> localhost.localdom:9001</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> localhost.localdom:1162</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ESTABLISHED</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> localhost.localdom:1162</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> localhost.localdom:9001</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ESTABLISHED</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     80</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 210.34.6.89:1161</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       210.34.6.10:netbios-ssn</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CLOSE</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Active</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> UNIX</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> domain</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sockets</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (w/o </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">servers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> RefCnt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Flags</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       Type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       State</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         I-Node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   Path</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">unix</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         STREAM</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     CONNECTED</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     16178</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    @000000dd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">unix</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         STREAM</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     CONNECTED</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     16176</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    @000000dc</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">unix</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       9</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         DGRAM</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      5292</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">          /dev/log</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">unix</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         STREAM</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     CONNECTED</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     16182</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    @000000df</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从整体上看，netstat 的输出结果可以分为两个部分：</p><h3 id="internet-连接部分" tabindex="-1"><a class="header-anchor" href="#internet-连接部分"><span>Internet 连接部分</span></a></h3><p><strong>Active Internet connections</strong>：称为有源 TCP 连接</p><ul><li><strong>Proto</strong>：显示连接使用的协议（TCP、UDP）</li><li><strong>Recv-Q</strong>：接收队列中的字节数</li><li><strong>Send-Q</strong>：发送队列中的字节数</li><li><strong>Local Address</strong>：本地地址和端口号</li><li><strong>Foreign Address</strong>：远程地址和端口号</li><li><strong>State</strong>：连接状态（LISTEN、ESTABLISHED、CLOSE_WAIT 等）</li></ul><blockquote><p><strong>注意</strong>：Recv-Q 和 Send-Q 这些数字一般都应该是 0。如果不是则表示数据包正在队列中堆积，可能存在网络问题。</p></blockquote><h3 id="unix-域套接字部分" tabindex="-1"><a class="header-anchor" href="#unix-域套接字部分"><span>UNIX 域套接字部分</span></a></h3><p><strong>Active UNIX domain sockets</strong>：称为有源 Unix 域套接字（用于本机进程间通信，性能比网络套接字高一倍）</p><ul><li><strong>Proto</strong>：显示连接使用的协议</li><li><strong>RefCnt</strong>：表示连接到本套接字上的进程号</li><li><strong>Flags</strong>：显示套接字的标志</li><li><strong>Type</strong>：显示套接字的类型（STREAM、DGRAM）</li><li><strong>State</strong>：显示套接字当前的状态</li><li><strong>I-Node</strong>：套接字的 inode 号</li><li><strong>Path</strong>：表示连接到套接字的其它进程使用的路径名</li></ul><h2 id="常用参数详解" tabindex="-1"><a class="header-anchor" href="#常用参数详解"><span>常用参数详解</span></a></h2><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td><strong>-a</strong></td><td>(all) 显示所有选项，包括 LISTEN 和非 LISTEN 状态</td></tr><tr><td><strong>-t</strong></td><td>(tcp) 仅显示 TCP 相关选项</td></tr><tr><td><strong>-u</strong></td><td>(udp) 仅显示 UDP 相关选项</td></tr><tr><td><strong>-n</strong></td><td>拒绝显示别名，能显示数字的全部转化成数字（禁用域名解析）</td></tr><tr><td><strong>-l</strong></td><td>仅列出有在 Listen（监听）的服务状态</td></tr><tr><td><strong>-p</strong></td><td>显示建立相关连接的程序名和进程 ID</td></tr><tr><td><strong>-r</strong></td><td>显示路由信息，路由表</td></tr><tr><td><strong>-e</strong></td><td>显示扩展信息，例如 uid 等</td></tr><tr><td><strong>-s</strong></td><td>按各个协议进行统计</td></tr><tr><td><strong>-c</strong></td><td>每隔一个固定时间，执行该 netstat 命令</td></tr><tr><td><strong>-i</strong></td><td>显示网络接口列表</td></tr><tr><td><strong>-g</strong></td><td>显示多播组信息</td></tr></tbody></table><blockquote><p><strong>提示</strong>：LISTEN 和 LISTENING 的状态只有用 -a 或者 -l 才能看到</p></blockquote><h2 id="实用命令实例" tabindex="-1"><a class="header-anchor" href="#实用命令实例"><span>实用命令实例</span></a></h2><h3 id="_1-列出所有连接" tabindex="-1"><a class="header-anchor" href="#_1-列出所有连接"><span>1. 列出所有连接</span></a></h3><p><strong>列出所有端口（包括监听和未监听的）</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -a</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>输出示例：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Active</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Internet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connections</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (servers </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">and</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> established</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Recv-Q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Send-Q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Local</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">           Foreign</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         State</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enlightened:domain</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">      *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                     LISTEN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> localhost:ipp</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">           *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                     LISTEN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enlightened.local:54750</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> li240-5.members.li:http</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ESTABLISHED</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enlightened.local:49980</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> del01s07-in-f14.1:https</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ESTABLISHED</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp6</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ip6-localhost:ipp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       [::]:*                  LISTEN     </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">udp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enlightened:domain</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">      *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                                </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">udp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:bootpc</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                                </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">udp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enlightened.local:ntp</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">   *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>列出所有 TCP 端口</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -at</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>列出所有 UDP 端口</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -au</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-只列出-tcp-或-udp-协议的连接" tabindex="-1"><a class="header-anchor" href="#_2-只列出-tcp-或-udp-协议的连接"><span>2. 只列出 TCP 或 UDP 协议的连接</span></a></h3><p><strong>使用 -t 选项列出 TCP 协议的连接：</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -at</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>输出示例：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Active</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Internet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connections</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (servers </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">and</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> established</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Recv-Q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Send-Q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Local</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">           Foreign</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         State</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enlightened:domain</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">      *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                     LISTEN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> localhost:ipp</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">           *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                     LISTEN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enlightened.local:36310</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> del01s07-in-f24.1:https</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ESTABLISHED</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enlightened.local:45038</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> a96-17-181-10.depl:http</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ESTABLISHED</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>使用 -u 选项列出 UDP 协议的连接：</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -au</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-禁用反向域名解析-加快查询速度" tabindex="-1"><a class="header-anchor" href="#_3-禁用反向域名解析-加快查询速度"><span>3. 禁用反向域名解析，加快查询速度</span></a></h3><p>默认情况下 netstat 会通过反向域名解析技术查找每个 IP 地址对应的主机名。这会降低查找速度。如果你觉得 IP 地址已经足够，而没有必要知道主机名，就使用 <strong>-n</strong> 选项禁用域名解析功能。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ant</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>输出示例：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Active</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Internet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connections</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (servers </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">and</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> established</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Recv-Q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Send-Q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Local</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">           Foreign</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         State</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.1.1:53</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            0.0.0.0:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               LISTEN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:631</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">           0.0.0.0:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               LISTEN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.1.2:49058</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       173.255.230.5:80</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        ESTABLISHED</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.1.2:33324</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       173.194.36.117:443</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      ESTABLISHED</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp6</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ::1:631</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                 :::</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                    LISTEN</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-只列出监听中的连接" tabindex="-1"><a class="header-anchor" href="#_4-只列出监听中的连接"><span>4. 只列出监听中的连接</span></a></h3><p>任何网络服务的后台进程都会打开一个端口，用于监听接入的请求。这些正在监听的套接字也和连接的套接字一样，也能被 netstat 列出来。使用 <strong>-l</strong> 选项列出正在监听的套接字。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -tnl</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>输出示例：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Active</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Internet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connections</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (only </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">servers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Recv-Q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Send-Q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Local</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">           Foreign</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         State</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.1.1:53</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            0.0.0.0:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               LISTEN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:631</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">           0.0.0.0:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               LISTEN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp6</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ::1:631</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                 :::</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                    LISTEN</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>只列出所有监听 TCP 端口</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -lt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>只列出所有监听 UDP 端口</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -lu</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>只列出所有监听 UNIX 端口</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -lx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p><strong>注意</strong>：不要使用 <strong>-a</strong> 选项，否则 netstat 会列出所有连接，而不仅仅是监听端口。</p></blockquote><h3 id="_5-获取进程名、进程号以及用户-id" tabindex="-1"><a class="header-anchor" href="#_5-获取进程名、进程号以及用户-id"><span>5. 获取进程名、进程号以及用户 ID</span></a></h3><p>查看端口和连接的信息时，能查看到它们对应的进程名和进程号对系统管理员来说是非常有帮助的。举个例子，Apache 的 httpd 服务开启 80 端口，如果你要查看 http 服务是否已经启动，或者 http 服务是由 apache 还是 nginx 启动的，这时候你可以看看进程名。</p><p><strong>使用 -p 选项查看进程信息：</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -nlpt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>输出示例：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Active</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Internet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connections</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (only </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">servers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Recv-Q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Send-Q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Local</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">           Foreign</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         State</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       PID/Program</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> name</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.1.1:53</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            0.0.0.0:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               LISTEN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      1144/dnsmasq</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:631</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">           0.0.0.0:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               LISTEN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      661/cupsd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp6</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ::1:631</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                 :::</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                    LISTEN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      661/cupsd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>查看进程名和用户名：</strong></p><p>使用 <strong>-ep</strong> 选项可以同时查看进程名和用户名。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ltpe</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>输出示例：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Active</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Internet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connections</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (only </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">servers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Recv-Q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Send-Q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Local</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">           Foreign</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Address</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         State</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       User</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       Inode</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       PID/Program</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> name</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enlightened:domain</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">      *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                     LISTEN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       11090</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       1144/dnsmasq</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> localhost:ipp</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">           *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                     LISTEN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       9755</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        661/cupsd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp6</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ip6-localhost:ipp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       [::]:*                  LISTEN      root       9754        661/cupsd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>重要提示</strong>：使用 <strong>-p</strong> 选项时，netstat 必须运行在 root 权限之下，不然它就不能得到运行在 root 权限下的进程名，而很多服务包括 http 和 ftp 都运行在 root 权限之下。</p></blockquote><blockquote><p><strong>注意</strong>：假如你将 <strong>-n</strong> 和 <strong>-e</strong> 选项一起使用，User 列的属性就是用户的 ID 号，而不是用户名。</p></blockquote><h3 id="_6-显示每个协议的统计信息" tabindex="-1"><a class="header-anchor" href="#_6-显示每个协议的统计信息"><span>6. 显示每个协议的统计信息</span></a></h3><p>netstat 可以打印出网络统计数据，包括某个协议下的收发包数量。</p><p><strong>显示所有端口的统计信息</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>输出示例：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Ip:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    32797</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> total</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> packets</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> received</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> forwarded</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> incoming</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> packets</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> discarded</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    32795</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> incoming</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> packets</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> delivered</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    29115</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> requests</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sent</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> out</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    60</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> outgoing</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> packets</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dropped</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Icmp:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    125</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ICMP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> messages</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> received</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> input</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ICMP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> message</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> failed.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ICMP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> input</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> histogram:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        destination</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> unreachable:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 125</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    125</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ICMP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> messages</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sent</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ICMP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> messages</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> failed</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    ICMP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> output</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> histogram:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        destination</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> unreachable:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 125</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">...</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> OUTPUT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> TRUNCATED</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>显示 TCP 或 UDP 端口的统计信息</strong></p><p>如果想只打印出 TCP 或 UDP 协议的统计数据，只要加上对应的选项（<strong>-t</strong> 和 <strong>-u</strong>）即可。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -st</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">   # TCP 统计信息</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -su</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">   # UDP 统计信息</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-显示内核路由信息" tabindex="-1"><a class="header-anchor" href="#_7-显示内核路由信息"><span>7. 显示内核路由信息</span></a></h3><p>使用 <strong>-r</strong> 选项打印内核路由信息。打印出来的信息与 route 命令输出的信息一样。我们也可以使用 <strong>-n</strong> 选项禁止域名解析。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -rn</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>输出示例：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Kernel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> routing</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> table</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Destination</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     Gateway</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         Genmask</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         Flags</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   MSS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Window</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  irtt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Iface</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0.0.0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         192.168.1.1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0.0.0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         UG</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">          0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> eth0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">192.168.1.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0.0.0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         255.255.255.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   U</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">          0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> eth0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-显示网络接口信息" tabindex="-1"><a class="header-anchor" href="#_8-显示网络接口信息"><span>8. 显示网络接口信息</span></a></h3><p>netstat 也能打印网络接口信息，<strong>-i</strong> 选项就是为这个功能而生。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>输出示例：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Kernel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> table</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Iface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   MTU</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Met</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   RX-OK</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> RX-ERR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> RX-DRP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> RX-OVR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    TX-OK</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> TX-ERR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> TX-DRP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> TX-OVR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Flg</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">eth0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       1500</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     31611</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         27503</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> BMRU</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        65536</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      2913</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">          2913</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LRU</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>显示详细的接口信息：</strong></p><p>我们将 <strong>-e</strong> 选项和 <strong>-i</strong> 选项搭配使用，可以输出用户友好的信息。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ie</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>输出示例：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Kernel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> table</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">eth0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      Link</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> encap:Ethernet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  HWaddr</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 00:16:36:f8:b2:64</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          inet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> addr:192.168.1.2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Bcast:192.168.1.255</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Mask:255.255.255.0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          inet6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> addr:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> fe80::216:36ff:fef8:b264/64</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Scope:Link</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          UP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> BROADCAST</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> RUNNING</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> MULTICAST</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  MTU:1500</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Metric:1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          RX</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> packets:31682</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> errors:0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dropped:0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> overruns:0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> frame:0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          TX</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> packets:27573</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> errors:0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dropped:0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> overruns:0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> carrier:0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          collisions:0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> txqueuelen:1000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          RX</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bytes:29637117</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (29.6 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)  TX bytes:4590583 (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4.5</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> MB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          Interrupt:18</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Memory:da000000-da020000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        Link</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> encap:Local</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Loopback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          inet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> addr:127.0.0.1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Mask:255.0.0.0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          inet6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> addr:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ::1/128</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Scope:Host</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          UP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LOOPBACK</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> RUNNING</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  MTU:65536</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Metric:1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          RX</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> packets:2921</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> errors:0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dropped:0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> overruns:0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> frame:0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          TX</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> packets:2921</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> errors:0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dropped:0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> overruns:0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> carrier:0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          collisions:0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> txqueuelen:0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          RX</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bytes:305297</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (305.2 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">KB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)  TX bytes:305297 (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">305.2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> KB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的输出信息与 ifconfig 输出的信息一样。</p><h3 id="_9-netstat-持续输出" tabindex="-1"><a class="header-anchor" href="#_9-netstat-持续输出"><span>9. netstat 持续输出</span></a></h3><p>我们可以使用 netstat 的 <strong>-c</strong> 选项持续输出信息。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ct</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这个命令可持续输出 TCP 协议信息，netstat 将每隔一秒输出网络信息。</p><h3 id="_10-显示多播组信息" tabindex="-1"><a class="header-anchor" href="#_10-显示多播组信息"><span>10. 显示多播组信息</span></a></h3><p>选项 <strong>-g</strong> 会输出 IPv4 和 IPv6 的多播组信息。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -g</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>输出示例：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">IPv6/IPv4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Group</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Memberships</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       RefCnt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Group</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">---------------</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> ------</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> ---------------------</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">              1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      all-systems.mcast.net</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">eth0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      224.0.0.251</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">eth0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      all-systems.mcast.net</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">              1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      ip6-allnodes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">              1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      ff01::1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">eth0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      ff02::fb</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">eth0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      ff02::1:fff8:b264</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">eth0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      ip6-allnodes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">eth0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      ff01::1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wlan0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">           1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      ip6-allnodes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wlan0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">           1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      ff01::1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="高级用法和实用技巧" tabindex="-1"><a class="header-anchor" href="#高级用法和实用技巧"><span>高级用法和实用技巧</span></a></h2><h3 id="查找活动连接" tabindex="-1"><a class="header-anchor" href="#查找活动连接"><span>查找活动连接</span></a></h3><p><strong>打印 ESTABLISHED 状态的连接</strong></p><p>active 状态的套接字连接用 &quot;ESTABLISHED&quot; 字段表示，所以我们可以使用 grep 命令获得 active 状态的连接：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -atnp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ESTA</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>输出示例：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> all</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> processes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> could</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> identified,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> non-owned</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> process</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> info</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> will</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shown,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> you</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> would</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> have</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> see</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> it</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> all.</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.1.2:49156</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       173.255.230.5:80</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        ESTABLISHED</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 1691/chrome</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 192.168.1.2:33324</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       173.194.36.117:443</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      ESTABLISHED</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 1691/chrome</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>监视活动连接</strong></p><p>配合 watch 命令监视 active 状态的连接：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">watch</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;netstat -atnp | grep ESTA&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="查看服务状态" tabindex="-1"><a class="header-anchor" href="#查看服务状态"><span>查看服务状态</span></a></h3><p><strong>查看服务是否在运行</strong></p><p>如果你想看看 http、smtp 或 ntp 服务是否在运行，使用 grep。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -aple</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ntp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>输出示例：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">udp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enlightened.local:ntp</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">   *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                                 root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       17430</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       1789/ntpd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">udp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> localhost:ntp</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">           *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                                 root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       17429</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       1789/ntpd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">udp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:ntp</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                   *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                                 root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       17422</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       1789/ntpd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">udp6</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> fe80::216:36ff:fef8:ntp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [::]:*                              root       17432       1789/ntpd       </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">udp6</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ip6-localhost:ntp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       [::]:*                              root       17431       1789/ntpd       </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">udp6</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [::]:ntp                [::]:*                              root       17423       1789/ntpd       </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">unix</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         DGRAM</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">                    17418</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    1789/ntpd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从这里可以看到 ntp 服务正在运行。使用 grep 命令你可以查看 http 或 smtp 或其它任何你想查看的服务。</p><h3 id="端口和进程查询" tabindex="-1"><a class="header-anchor" href="#端口和进程查询"><span>端口和进程查询</span></a></h3><p><strong>找出程序运行的端口</strong></p><p>并不是所有的进程都能找到，没有权限的会不显示，使用 root 权限查看所有的信息。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ssh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>找出运行在指定端口的进程</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -an</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;:80&#39;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">       # 查看 80 端口使用情况</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -an</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;:3306&#39;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     # 查看 3306 端口使用情况</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>查看当前所有监听端口</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -nlp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LISTEN</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>查看哪些端口被打开</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -anp</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ltn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 23</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>查看指定端口是否被打开</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ltn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 23</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="ip-和-tcp-分析" tabindex="-1"><a class="header-anchor" href="#ip-和-tcp-分析"><span>IP 和 TCP 分析</span></a></h3><p><strong>查看连接某服务端口最多的 IP 地址</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -nat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;192.168.1.15:22&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;{print $5}&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awk</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -F:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;{print $1}&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sort</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">uniq</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sort</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -nr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">head</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -20</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>TCP 各种状态列表</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -nat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;{print $6}&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sort</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">uniq</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sort</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -rn</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>分析 access.log 获得访问前10位的 IP 地址</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;{print $1}&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> access.log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sort</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">uniq</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sort</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -nr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">head</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -10</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="常见网络状态说明" tabindex="-1"><a class="header-anchor" href="#常见网络状态说明"><span>常见网络状态说明</span></a></h2><table><thead><tr><th>状态</th><th>描述</th></tr></thead><tbody><tr><td><strong>LISTEN</strong></td><td>侦听来自远方的TCP端口的连接请求</td></tr><tr><td><strong>SYN-SENT</strong></td><td>再发送连接请求后等待匹配的连接请求</td></tr><tr><td><strong>SYN-RECEIVED</strong></td><td>再收到和发送一个连接请求后等待对方对连接请求的确认</td></tr><tr><td><strong>ESTABLISHED</strong></td><td>代表一个打开的连接</td></tr><tr><td><strong>FIN-WAIT-1</strong></td><td>等待远程TCP连接中断请求，或先前的连接中断请求的确认</td></tr><tr><td><strong>FIN-WAIT-2</strong></td><td>从远程TCP等待连接中断请求</td></tr><tr><td><strong>CLOSE-WAIT</strong></td><td>等待从本地用户发来的连接中断请求</td></tr><tr><td><strong>CLOSING</strong></td><td>等待远程TCP对连接中断的确认</td></tr><tr><td><strong>LAST-ACK</strong></td><td>等待原来的发向远程TCP的连接中断请求的确认</td></tr><tr><td><strong>TIME-WAIT</strong></td><td>等待足够的时间以确保远程TCP接收到连接中断请求的确认</td></tr><tr><td><strong>CLOSED</strong></td><td>没有任何连接状态</td></tr></tbody></table><h2 id="实用组合命令" tabindex="-1"><a class="header-anchor" href="#实用组合命令"><span>实用组合命令</span></a></h2><h3 id="常用的-netstat-命令组合" tabindex="-1"><a class="header-anchor" href="#常用的-netstat-命令组合"><span>常用的 netstat 命令组合</span></a></h3><ol><li><p><strong>查看所有TCP连接及进程信息</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -atnp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>查看所有监听端口及进程信息</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -lnp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>快速查看某个端口是否被占用</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -an</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> :端口号</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>查看网络统计摘要</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">head</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -20</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>实时监控网络连接</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">watch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> netstat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ant</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ol><h2 id="注意事项和最佳实践" tabindex="-1"><a class="header-anchor" href="#注意事项和最佳实践"><span>注意事项和最佳实践</span></a></h2><ol><li><strong>权限问题</strong>：查看进程信息需要 root 权限，否则显示不完整</li><li><strong>性能考虑</strong>：在生产环境中频繁执行 netstat 可能影响性能</li><li><strong>域名解析</strong>：使用 -n 参数可以避免域名解析，提高命令执行速度</li><li><strong>过滤输出</strong>：合理使用 grep 等工具过滤输出，获取所需信息</li><li><strong>现代替代</strong>：在某些现代 Linux 发行版中，可以考虑使用 ss 命令替代 netstat</li></ol><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><p>netstat 是 Linux 系统网络诊断和监控的重要工具，掌握其各种参数和用法对于系统管理员和网络工程师来说至关重要。通过本文介绍的各种用法，您可以有效地监控网络连接、诊断网络问题、查看系统资源使用情况等。</p><p>在实际使用中，建议根据具体需求选择合适的参数组合，并结合其他工具（如 grep、awk、watch 等）来获得更精确的信息。同时，要注意命令的执行权限和对系统性能的影响。</p><p>如果您想了解更多高级功能，建议阅读 netstat 的手册页（man netstat）。</p>`,145)]))}const d=i(t,[["render",l]]),r=JSON.parse(`{"path":"/linux/%E7%BD%91%E7%BB%9C%E5%B7%A5%E5%85%B7/netstat.html","title":"netstat命令-网络监控","lang":"zh-CN","frontmatter":{"title":"netstat命令-网络监控","category":["Linux命令"],"tag":["网络工具","系统监控","网络诊断","查看端口"],"date":"2022-09-12T00:00:00.000Z","description":"netstat命令-网络监控 简介 Netstat 命令是 Linux 系统中最重要的网络监测工具之一，用于显示各种网络相关信息，如网络连接、路由表、接口状态（Interface Statistics）、masquerade 连接、多播成员（Multicast Memberships）等。对于网络管理员和系统运维人员来说，掌握 netstat 命令是必...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"netstat命令-网络监控\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-09-12T00:00:00.000Z\\",\\"dateModified\\":\\"2025-07-09T15:12:33.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"tuonioooo\\",\\"url\\":\\"/\\"}]}"],["meta",{"property":"og:url","content":"https://mister-hope.github.io/linux/%E7%BD%91%E7%BB%9C%E5%B7%A5%E5%85%B7/netstat.html"}],["meta",{"property":"og:site_name","content":"tuonioooo's DevOps Docs"}],["meta",{"property":"og:title","content":"netstat命令-网络监控"}],["meta",{"property":"og:description","content":"netstat命令-网络监控 简介 Netstat 命令是 Linux 系统中最重要的网络监测工具之一，用于显示各种网络相关信息，如网络连接、路由表、接口状态（Interface Statistics）、masquerade 连接、多播成员（Multicast Memberships）等。对于网络管理员和系统运维人员来说，掌握 netstat 命令是必..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-07-09T15:12:33.000Z"}],["meta",{"property":"article:tag","content":"查看端口"}],["meta",{"property":"article:tag","content":"网络诊断"}],["meta",{"property":"article:tag","content":"系统监控"}],["meta",{"property":"article:tag","content":"网络工具"}],["meta",{"property":"article:published_time","content":"2022-09-12T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-07-09T15:12:33.000Z"}]]},"git":{"createdTime":1752073953000,"updatedTime":1752073953000,"contributors":[{"name":"tuonioooo","username":"tuonioooo","email":"daizhaoman@sina.com","commits":1,"url":"https://github.com/tuonioooo"}]},"readingTime":{"minutes":11.3,"words":3389},"filePathRelative":"linux/网络工具/netstat.md","excerpt":"\\n<h2>简介</h2>\\n<p>Netstat 命令是 Linux 系统中最重要的网络监测工具之一，用于显示各种网络相关信息，如网络连接、路由表、接口状态（Interface Statistics）、masquerade 连接、多播成员（Multicast Memberships）等。对于网络管理员和系统运维人员来说，掌握 netstat 命令是必不可少的技能。</p>\\n<h2>输出信息含义</h2>\\n<p>执行 netstat 后，其输出结果为：</p>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code class=\\"language-bash\\"><span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">Active</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> Internet</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> connections</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> (w/o </span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">servers</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">Proto</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> Recv-Q</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> Send-Q</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> Local</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> Address</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">           Foreign</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> Address</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">         State</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">tcp</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">        0</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">      2</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> 210.34.6.89:telnet</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">     210.34.6.96:2873</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">        ESTABLISHED</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">tcp</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">      296</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">      0</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> 210.34.6.89:1165</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">       210.34.6.84:netbios-ssn</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> ESTABLISHED</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">tcp</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">        0</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">      0</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> localhost.localdom:9001</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> localhost.localdom:1162</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> ESTABLISHED</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">tcp</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">        0</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">      0</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> localhost.localdom:1162</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> localhost.localdom:9001</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> ESTABLISHED</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">tcp</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">        0</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">     80</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> 210.34.6.89:1161</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">       210.34.6.10:netbios-ssn</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> CLOSE</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">Active</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> UNIX</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> domain</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> sockets</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> (w/o </span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">servers</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">Proto</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> RefCnt</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> Flags</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">       Type</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">       State</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">         I-Node</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">   Path</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">unix</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">       1</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">]</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">         STREAM</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">     CONNECTED</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">     16178</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">    @000000dd</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">unix</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">       1</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">]</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">         STREAM</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">     CONNECTED</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">     16176</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">    @000000dc</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">unix</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">       9</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">]</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">         DGRAM</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">      5292</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">          /dev/log</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">unix</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">       1</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> [ </span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">]</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">         STREAM</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">     CONNECTED</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">     16182</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">    @000000df</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}`);export{d as comp,r as data};
