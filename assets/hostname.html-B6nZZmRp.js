import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as e,o as n}from"./app-DgGiCkCw.js";const h={};function t(l,s){return n(),a("div",null,s[0]||(s[0]=[e(`<h1 id="linux-hostname-修改完整指南" tabindex="-1"><a class="header-anchor" href="#linux-hostname-修改完整指南"><span>Linux Hostname 修改完整指南</span></a></h1><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p>本指南将深入探讨 Linux 系统中 hostname 的工作原理、修改方法和常见问题。</p><h2 id="什么是-hostname" tabindex="-1"><a class="header-anchor" href="#什么是-hostname"><span>什么是 Hostname</span></a></h2><p>Hostname 是 Linux 系统的一个内核参数，用于在网络中唯一标识计算机。它的值存储在 <code>/proc/sys/kernel/hostname</code> 文件中。</p><h2 id="核心概念理解" tabindex="-1"><a class="header-anchor" href="#核心概念理解"><span>核心概念理解</span></a></h2><h3 id="hostname-的存储位置" tabindex="-1"><a class="header-anchor" href="#hostname-的存储位置"><span>Hostname 的存储位置</span></a></h3><ol><li><strong>内核参数</strong>：<code>/proc/sys/kernel/hostname</code> - 当前生效的 hostname</li><li><strong>配置文件</strong>：<code>/etc/sysconfig/network</code> - 永久配置（RHEL/CentOS）</li><li><strong>Hosts 文件</strong>：<code>/etc/hosts</code> - 主机名解析配置</li></ol><h3 id="启动过程中的加载机制" tabindex="-1"><a class="header-anchor" href="#启动过程中的加载机制"><span>启动过程中的加载机制</span></a></h3><p>Linux 系统启动时，<code>rc.sysinit</code> 会从 <code>/etc/sysconfig/network</code> 文件中读取 <code>HOSTNAME</code> 值，并设置到内核参数中：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># /etc/rc.d/rc.sysinit 中的相关代码</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /etc/sysconfig/network ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    .</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/sysconfig/network</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-z</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$HOSTNAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$HOSTNAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;(none)&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    HOSTNAME</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">localhost</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fi</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="查看-hostname-的方法" tabindex="-1"><a class="header-anchor" href="#查看-hostname-的方法"><span>查看 Hostname 的方法</span></a></h2><h3 id="_1-使用-hostname-命令" tabindex="-1"><a class="header-anchor" href="#_1-使用-hostname-命令"><span>1. 使用 hostname 命令</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hostname</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-查看内核参数" tabindex="-1"><a class="header-anchor" href="#_2-查看内核参数"><span>2. 查看内核参数</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /proc/sys/kernel/hostname</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 或</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sysctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kernel.hostname</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-查看配置文件" tabindex="-1"><a class="header-anchor" href="#_3-查看配置文件"><span>3. 查看配置文件</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># RHEL/CentOS</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/sysconfig/network</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Ubuntu/Debian</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/hostname</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-使用-hostnamectl-systemd-系统" tabindex="-1"><a class="header-anchor" href="#_4-使用-hostnamectl-systemd-系统"><span>4. 使用 hostnamectl（systemd 系统）</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hostnamectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> status</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="修改-hostname-的方法" tabindex="-1"><a class="header-anchor" href="#修改-hostname-的方法"><span>修改 Hostname 的方法</span></a></h2><h3 id="方法一-临时修改-重启后失效" tabindex="-1"><a class="header-anchor" href="#方法一-临时修改-重启后失效"><span>方法一：临时修改（重启后失效）</span></a></h3><h4 id="_1-使用-hostname-命令-1" tabindex="-1"><a class="header-anchor" href="#_1-使用-hostname-命令-1"><span>1. 使用 hostname 命令</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hostname</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> new-hostname</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2-直接写入内核参数" tabindex="-1"><a class="header-anchor" href="#_2-直接写入内核参数"><span>2. 直接写入内核参数</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;new-hostname&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /proc/sys/kernel/hostname</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_3-使用-sysctl-命令" tabindex="-1"><a class="header-anchor" href="#_3-使用-sysctl-命令"><span>3. 使用 sysctl 命令</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sysctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kernel.hostname=new-hostname</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="方法二-永久修改" tabindex="-1"><a class="header-anchor" href="#方法二-永久修改"><span>方法二：永久修改</span></a></h3><h4 id="_1-rhel-centos-fedora-系统" tabindex="-1"><a class="header-anchor" href="#_1-rhel-centos-fedora-系统"><span>1. RHEL/CentOS/Fedora 系统</span></a></h4><p>编辑 <code>/etc/sysconfig/network</code> 文件：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/sysconfig/network</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>修改 <code>HOSTNAME</code> 值：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>NETWORKING=yes</span></span>
<span class="line"><span>HOSTNAME=new-hostname.localdomain</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-ubuntu-debian-系统" tabindex="-1"><a class="header-anchor" href="#_2-ubuntu-debian-系统"><span>2. Ubuntu/Debian 系统</span></a></h4><p>编辑 <code>/etc/hostname</code> 文件：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;new-hostname&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/hostname</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_3-使用-hostnamectl-推荐" tabindex="-1"><a class="header-anchor" href="#_3-使用-hostnamectl-推荐"><span>3. 使用 hostnamectl（推荐）</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hostnamectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> set-hostname</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> new-hostname</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="方法三-立即生效的永久修改" tabindex="-1"><a class="header-anchor" href="#方法三-立即生效的永久修改"><span>方法三：立即生效的永久修改</span></a></h3><p>结合永久修改和临时修改，使更改立即生效：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 修改配置文件</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/sysconfig/network</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 或 /etc/hostname</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 立即生效</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hostname</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> new-hostname</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 或</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;new-hostname&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /proc/sys/kernel/hostname</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="配置-etc-hosts-文件" tabindex="-1"><a class="header-anchor" href="#配置-etc-hosts-文件"><span>配置 /etc/hosts 文件</span></a></h2><p>虽然 hostname 的修改不依赖于 <code>/etc/hosts</code> 文件，但建议同时更新该文件以确保本地名称解析正常：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/hosts</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>添加或修改条目：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>127.0.0.1   localhost localhost.localdomain</span></span>
<span class="line"><span>127.0.1.1   new-hostname.localdomain new-hostname</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="特殊情况处理" tabindex="-1"><a class="header-anchor" href="#特殊情况处理"><span>特殊情况处理</span></a></h2><h3 id="当-hostname-为-localhost-时的自动处理" tabindex="-1"><a class="header-anchor" href="#当-hostname-为-localhost-时的自动处理"><span>当 HOSTNAME 为 localhost 时的自动处理</span></a></h3><p>在 <code>/etc/rc.d/rc.sysinit</code> 中，当 hostname 为 <code>localhost</code> 或 <code>localhost.localdomain</code> 时，系统会尝试使用网络接口的 IP 地址对应的主机名：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$HOSTNAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;localhost&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$HOSTNAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;localhost.localdomain&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    ipaddr</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> addr</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> show</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scope</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> global</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;/[:space:]inet / { print gensub(&quot;/.*&quot;,&quot;&quot;,&quot;g&quot;,$2) }&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$ipaddr</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">        eval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> $(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ipcalc</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -h</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $ipaddr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 2&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/dev/null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        hostname</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;"> \${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">HOSTNAME</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fi</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="常见命令参数" tabindex="-1"><a class="header-anchor" href="#常见命令参数"><span>常见命令参数</span></a></h2><h3 id="hostname-命令选项" tabindex="-1"><a class="header-anchor" href="#hostname-命令选项"><span>hostname 命令选项</span></a></h3><table><thead><tr><th>选项</th><th>说明</th></tr></thead><tbody><tr><td><code>-f, --fqdn</code></td><td>显示完全限定域名</td></tr><tr><td><code>-i, --ip-address</code></td><td>显示主机的 IP 地址</td></tr><tr><td><code>-I, --all-ip-addresses</code></td><td>显示所有 IP 地址</td></tr><tr><td><code>-s, --short</code></td><td>显示短主机名</td></tr><tr><td><code>-d, --domain</code></td><td>显示域名</td></tr><tr><td><code>-y, --yp</code></td><td>显示 NIS 域名</td></tr></tbody></table><h3 id="hostnamectl-命令选项" tabindex="-1"><a class="header-anchor" href="#hostnamectl-命令选项"><span>hostnamectl 命令选项</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看状态</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hostnamectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> status</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 设置主机名</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hostnamectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> set-hostname</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> new-hostname</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 设置带注释的主机名</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hostnamectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> set-hostname</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;My Server&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --pretty</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 设置静态主机名</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hostnamectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> set-hostname</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> new-hostname</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --static</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 设置瞬态主机名</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hostnamectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> set-hostname</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> new-hostname</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --transient</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="最佳实践" tabindex="-1"><a class="header-anchor" href="#最佳实践"><span>最佳实践</span></a></h2><h3 id="_1-主机名命名规范" tabindex="-1"><a class="header-anchor" href="#_1-主机名命名规范"><span>1. 主机名命名规范</span></a></h3><ul><li>使用小写字母、数字和连字符</li><li>避免使用特殊字符和空格</li><li>长度建议控制在 63 个字符以内</li><li>使用有意义的名称，便于识别</li></ul><h3 id="_2-修改建议" tabindex="-1"><a class="header-anchor" href="#_2-修改建议"><span>2. 修改建议</span></a></h3><ul><li>在生产环境中修改前先测试</li><li>同时更新 <code>/etc/hosts</code> 文件</li><li>考虑使用 <code>hostnamectl</code> 命令（systemd 系统）</li><li>确保网络配置的一致性</li></ul><h3 id="_3-验证修改结果" tabindex="-1"><a class="header-anchor" href="#_3-验证修改结果"><span>3. 验证修改结果</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 检查所有相关信息</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hostname</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hostname</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /proc/sys/kernel/hostname</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hostnamectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> status</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="故障排除" tabindex="-1"><a class="header-anchor" href="#故障排除"><span>故障排除</span></a></h2><h3 id="问题1-修改后不生效" tabindex="-1"><a class="header-anchor" href="#问题1-修改后不生效"><span>问题1：修改后不生效</span></a></h3><ul><li>检查是否有足够的权限（需要 root 权限）</li><li>确认修改了正确的配置文件</li><li>重新登录或新建终端会话</li></ul><h3 id="问题2-重启后恢复原值" tabindex="-1"><a class="header-anchor" href="#问题2-重启后恢复原值"><span>问题2：重启后恢复原值</span></a></h3><ul><li>检查 <code>/etc/sysconfig/network</code> 或 <code>/etc/hostname</code> 文件</li><li>确保永久配置文件已正确修改</li></ul><h3 id="问题3-网络服务异常" tabindex="-1"><a class="header-anchor" href="#问题3-网络服务异常"><span>问题3：网络服务异常</span></a></h3><ul><li>检查 <code>/etc/hosts</code> 文件配置</li><li>确保 <code>127.0.0.1 localhost</code> 条目存在</li><li>重启网络服务或系统</li></ul><h2 id="不同发行版的差异" tabindex="-1"><a class="header-anchor" href="#不同发行版的差异"><span>不同发行版的差异</span></a></h2><h3 id="rhel-centos-fedora" tabindex="-1"><a class="header-anchor" href="#rhel-centos-fedora"><span>RHEL/CentOS/Fedora</span></a></h3><ul><li>配置文件：<code>/etc/sysconfig/network</code></li><li>格式：<code>HOSTNAME=hostname.domain</code></li></ul><h3 id="ubuntu-debian" tabindex="-1"><a class="header-anchor" href="#ubuntu-debian"><span>Ubuntu/Debian</span></a></h3><ul><li>配置文件：<code>/etc/hostname</code></li><li>格式：直接写入主机名</li></ul><h3 id="suse" tabindex="-1"><a class="header-anchor" href="#suse"><span>SUSE</span></a></h3><ul><li>配置文件：<code>/etc/HOSTNAME</code></li><li>格式：直接写入主机名</li></ul><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><p>理解 Linux hostname 的工作机制对于系统管理至关重要。记住以下要点：</p><ol><li><strong>Hostname 是内核参数</strong>，存储在 <code>/proc/sys/kernel/hostname</code></li><li><strong>配置文件控制启动行为</strong>，但不是实时生效的</li><li><strong>临时修改立即生效</strong>，永久修改需要重启或结合使用</li><li><strong>不同发行版配置文件位置不同</strong>，但原理相同</li><li><strong>使用 hostnamectl 是现代系统的推荐方式</strong></li></ol><p>通过本指南，您应该能够完全掌握 Linux 系统中 hostname 的修改和管理。</p>`,81)]))}const k=i(h,[["render",t]]),p=JSON.parse(`{"path":"/linux/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/hostname.html","title":"hostname-主机名设置与管理","lang":"zh-CN","frontmatter":{"title":"hostname-主机名设置与管理","category":["Linux","服务器配置"],"tag":["hostname","系统配置","网络标识"],"date":"2022-08-13T00:00:00.000Z","description":"Linux Hostname 修改完整指南 概述 本指南将深入探讨 Linux 系统中 hostname 的工作原理、修改方法和常见问题。 什么是 Hostname Hostname 是 Linux 系统的一个内核参数，用于在网络中唯一标识计算机。它的值存储在 /proc/sys/kernel/hostname 文件中。 核心概念理解 Hostname...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"hostname-主机名设置与管理\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-08-13T00:00:00.000Z\\",\\"dateModified\\":\\"2025-07-09T15:12:33.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"tuonioooo\\",\\"url\\":\\"/\\"}]}"],["meta",{"property":"og:url","content":"https://mister-hope.github.io/linux/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/hostname.html"}],["meta",{"property":"og:site_name","content":"tuonioooo's DevOps Docs"}],["meta",{"property":"og:title","content":"hostname-主机名设置与管理"}],["meta",{"property":"og:description","content":"Linux Hostname 修改完整指南 概述 本指南将深入探讨 Linux 系统中 hostname 的工作原理、修改方法和常见问题。 什么是 Hostname Hostname 是 Linux 系统的一个内核参数，用于在网络中唯一标识计算机。它的值存储在 /proc/sys/kernel/hostname 文件中。 核心概念理解 Hostname..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-07-09T15:12:33.000Z"}],["meta",{"property":"article:tag","content":"网络标识"}],["meta",{"property":"article:tag","content":"系统配置"}],["meta",{"property":"article:tag","content":"hostname"}],["meta",{"property":"article:published_time","content":"2022-08-13T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-07-09T15:12:33.000Z"}]]},"git":{"createdTime":1752073953000,"updatedTime":1752073953000,"contributors":[{"name":"tuonioooo","username":"tuonioooo","email":"daizhaoman@sina.com","commits":1,"url":"https://github.com/tuonioooo"}]},"readingTime":{"minutes":3.8,"words":1140},"filePathRelative":"linux/服务器配置/hostname.md","excerpt":"\\n<h2>概述</h2>\\n<p>本指南将深入探讨 Linux 系统中 hostname 的工作原理、修改方法和常见问题。</p>\\n<h2>什么是 Hostname</h2>\\n<p>Hostname 是 Linux 系统的一个内核参数，用于在网络中唯一标识计算机。它的值存储在 <code>/proc/sys/kernel/hostname</code> 文件中。</p>\\n<h2>核心概念理解</h2>\\n<h3>Hostname 的存储位置</h3>\\n<ol>\\n<li><strong>内核参数</strong>：<code>/proc/sys/kernel/hostname</code> - 当前生效的 hostname</li>\\n<li><strong>配置文件</strong>：<code>/etc/sysconfig/network</code> - 永久配置（RHEL/CentOS）</li>\\n<li><strong>Hosts 文件</strong>：<code>/etc/hosts</code> - 主机名解析配置</li>\\n</ol>","autoDesc":true}`);export{k as comp,p as data};
