import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,a,o as e}from"./app-Chw5Q7wx.js";const n={};function l(d,s){return e(),i("div",null,s[0]||(s[0]=[a(`<h1 id="iptables命令-linux传统防火墙配置指南" tabindex="-1"><a class="header-anchor" href="#iptables命令-linux传统防火墙配置指南"><span>iptables命令-Linux传统防火墙配置指南</span></a></h1><p>iptables 是 Linux 系统中的网络防火墙管理工具，用于配置内核的 netfilter 框架。它允许系统管理员定义规则来控制网络流量的进出，实现包过滤、网络地址转换（NAT）、端口转发等功能。</p><h2 id="iptables-基本概念" tabindex="-1"><a class="header-anchor" href="#iptables-基本概念"><span>iptables 基本概念</span></a></h2><p>iptables 通过表（tables）和链（chains）来组织规则。主要包含四个表：</p><ul><li><strong>filter表</strong>：默认表，用于包过滤（允许/拒绝）</li><li><strong>nat表</strong>：用于网络地址转换</li><li><strong>mangle表</strong>：用于修改数据包</li><li><strong>raw表</strong>：用于配置数据包，使其免于被连接跟踪系统处理</li></ul><p>每个表包含多个预定义链，如 INPUT、OUTPUT、FORWARD 等，用户也可以创建自定义链。</p><h2 id="基本语法" tabindex="-1"><a class="header-anchor" href="#基本语法"><span>基本语法</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">iptables</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [-t </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">table]</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [chain] [rule-specification] [target]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>常用命令示例：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看规则</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -L</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 允许特定端口</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 22</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ACCEPT</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 拒绝特定IP</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">iptables</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 192.168.1.100</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DROP</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 保存规则</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">iptables-save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/etc/iptables/rules.v4</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查询防火墙状态：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">service</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> status</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 停止防火墙：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">service</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stop</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 启动防火墙：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">service</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> start</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 重启防火墙：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">service</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> restart</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 永久关闭防火墙：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">chkconfig</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> off</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 永久关闭后启用：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">chkconfig</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> on</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看防火墙配置文件：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/sysconfig/iptables</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 编辑防火墙配置文件：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/sysconfig/iptables</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="../_resources/centos6_%E9%98%B2%E7%81%AB%E5%A2%99%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4.resources/unknown_filename.jpeg"></a></p><h2 id="各系统安装与兼容性对比" tabindex="-1"><a class="header-anchor" href="#各系统安装与兼容性对比"><span>各系统安装与兼容性对比</span></a></h2><h3 id="iptables-各系统安装与兼容性对比" tabindex="-1"><a class="header-anchor" href="#iptables-各系统安装与兼容性对比"><span>iptables 各系统安装与兼容性对比</span></a></h3><table><thead><tr><th>系统</th><th>默认安装</th><th>安装命令</th><th>默认版本</th><th>配置文件位置</th><th>服务管理</th><th>兼容性</th><th>备注</th></tr></thead><tbody><tr><td><strong>Ubuntu/Debian</strong></td><td>✅</td><td><code>apt install iptables</code></td><td>1.8.x</td><td><code>/etc/iptables/</code></td><td><code>systemctl enable/start netfilter-persistent</code></td><td>完全兼容</td><td>新版本默认使用 nftables 后端</td></tr><tr><td><strong>CentOS/RHEL 7</strong></td><td>✅</td><td><code>yum install iptables-services</code></td><td>1.4.x</td><td><code>/etc/sysconfig/iptables</code></td><td><code>systemctl enable/start iptables</code></td><td>完全兼容</td><td>传统 iptables 实现</td></tr><tr><td><strong>CentOS/RHEL 8+</strong></td><td>❌</td><td><code>dnf install iptables-services</code></td><td>1.8.x</td><td><code>/etc/sysconfig/iptables</code></td><td><code>systemctl disable firewalld &amp;&amp; systemctl enable iptables</code></td><td>兼容性问题</td><td>默认使用 firewalld，需要切换</td></tr><tr><td><strong>Fedora</strong></td><td>❌</td><td><code>dnf install iptables-services</code></td><td>1.8.x</td><td><code>/etc/sysconfig/iptables</code></td><td><code>systemctl disable firewalld &amp;&amp; systemctl enable iptables</code></td><td>兼容性问题</td><td>默认使用 firewalld</td></tr><tr><td><strong>openSUSE</strong></td><td>❌</td><td><code>zypper install iptables</code></td><td>1.8.x</td><td><code>/etc/sysconfig/SuSEfirewall2</code></td><td><code>systemctl enable/start SuSEfirewall2</code></td><td>部分兼容</td><td>推荐使用 SuSEfirewall2</td></tr><tr><td><strong>Arch Linux</strong></td><td>❌</td><td><code>pacman -S iptables</code></td><td>1.8.x</td><td><code>/etc/iptables/</code></td><td><code>systemctl enable/start iptables</code></td><td>完全兼容</td><td>需要手动配置</td></tr><tr><td><strong>Alpine Linux</strong></td><td>❌</td><td><code>apk add iptables</code></td><td>1.8.x</td><td><code>/etc/iptables/</code></td><td><code>rc-update add iptables</code></td><td>完全兼容</td><td>轻量级发行版</td></tr><tr><td><strong>Amazon Linux 2</strong></td><td>✅</td><td><code>yum install iptables-services</code></td><td>1.4.x</td><td><code>/etc/sysconfig/iptables</code></td><td><code>systemctl enable/start iptables</code></td><td>完全兼容</td><td>基于 RHEL 7</td></tr><tr><td><strong>FreeBSD</strong></td><td>❌</td><td><code>pkg install iptables</code></td><td>1.8.x</td><td><code>/usr/local/etc/</code></td><td>手动配置</td><td>限制兼容</td><td>需要 Linux 兼容层</td></tr><tr><td><strong>macOS</strong></td><td>❌</td><td><code>brew install iptables</code></td><td>1.8.x</td><td>-</td><td>-</td><td>不兼容</td><td>仅作为工具使用，无法实际配置防火墙</td></tr></tbody></table><h3 id="现代替代方案对比" tabindex="-1"><a class="header-anchor" href="#现代替代方案对比"><span>现代替代方案对比</span></a></h3><table><thead><tr><th>系统</th><th>传统工具</th><th>现代替代</th><th>状态</th><th>推荐使用</th></tr></thead><tbody><tr><td><strong>Ubuntu 20.04+</strong></td><td>iptables</td><td>nftables</td><td>共存</td><td>nftables</td></tr><tr><td><strong>CentOS/RHEL 8+</strong></td><td>iptables</td><td>firewalld/nftables</td><td>替代</td><td>firewalld</td></tr><tr><td><strong>Fedora</strong></td><td>iptables</td><td>firewalld</td><td>替代</td><td>firewalld</td></tr><tr><td><strong>Debian 10+</strong></td><td>iptables</td><td>nftables</td><td>共存</td><td>nftables</td></tr><tr><td><strong>openSUSE</strong></td><td>iptables</td><td>firewalld</td><td>替代</td><td>firewalld</td></tr></tbody></table><h3 id="版本兼容性说明" tabindex="-1"><a class="header-anchor" href="#版本兼容性说明"><span>版本兼容性说明</span></a></h3><h4 id="iptables-1-4-x-传统版本" tabindex="-1"><a class="header-anchor" href="#iptables-1-4-x-传统版本"><span>iptables 1.4.x (传统版本)</span></a></h4><ul><li>使用传统的内核接口</li><li>在 CentOS/RHEL 7 及更早版本中使用</li><li>性能较低，但兼容性最好</li></ul><h4 id="iptables-1-8-x-现代版本" tabindex="-1"><a class="header-anchor" href="#iptables-1-8-x-现代版本"><span>iptables 1.8.x (现代版本)</span></a></h4><ul><li>默认使用 nftables 后端</li><li>向后兼容传统 iptables 语法</li><li>性能更好，推荐使用</li></ul><h3 id="迁移建议" tabindex="-1"><a class="header-anchor" href="#迁移建议"><span>迁移建议</span></a></h3><ol><li><strong>新系统</strong>：直接使用系统默认的防火墙工具（firewalld 或 nftables）</li><li><strong>旧系统</strong>：可以继续使用 iptables，但建议逐步迁移</li><li><strong>容器环境</strong>：优先使用 iptables 或 nftables，避免使用 systemd 服务</li><li><strong>云环境</strong>：考虑使用云提供商的安全组功能配合 iptables 使用</li></ol><p>在实际部署时，建议先在测试环境中验证配置的兼容性和功能完整性。</p>`,24)]))}const h=t(n,[["render",l]]),c=JSON.parse(`{"path":"/linux/%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E4%B8%8E%E7%9B%91%E6%8E%A7/iptables.html","title":"iptables命令-传统防火墙指南","lang":"zh-CN","frontmatter":{"title":"iptables命令-传统防火墙指南","category":["Linux","系统管理与监控"],"tag":["iptables","防火墙","网络安全","netfilter"],"date":"2022-09-06T00:00:00.000Z","description":"iptables命令-Linux传统防火墙配置指南 iptables 是 Linux 系统中的网络防火墙管理工具，用于配置内核的 netfilter 框架。它允许系统管理员定义规则来控制网络流量的进出，实现包过滤、网络地址转换（NAT）、端口转发等功能。 iptables 基本概念 iptables 通过表（tables）和链（chains）来组织规则...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"iptables命令-传统防火墙指南\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-09-06T00:00:00.000Z\\",\\"dateModified\\":\\"2025-07-09T15:12:33.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"tuonioooo\\",\\"url\\":\\"/\\"}]}"],["meta",{"property":"og:url","content":"https://mister-hope.github.io/devops-docs/linux/%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E4%B8%8E%E7%9B%91%E6%8E%A7/iptables.html"}],["meta",{"property":"og:site_name","content":"tuonioooo's DevOps Docs"}],["meta",{"property":"og:title","content":"iptables命令-传统防火墙指南"}],["meta",{"property":"og:description","content":"iptables命令-Linux传统防火墙配置指南 iptables 是 Linux 系统中的网络防火墙管理工具，用于配置内核的 netfilter 框架。它允许系统管理员定义规则来控制网络流量的进出，实现包过滤、网络地址转换（NAT）、端口转发等功能。 iptables 基本概念 iptables 通过表（tables）和链（chains）来组织规则..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-07-09T15:12:33.000Z"}],["meta",{"property":"article:tag","content":"netfilter"}],["meta",{"property":"article:tag","content":"网络安全"}],["meta",{"property":"article:tag","content":"防火墙"}],["meta",{"property":"article:tag","content":"iptables"}],["meta",{"property":"article:published_time","content":"2022-09-06T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-07-09T15:12:33.000Z"}]]},"git":{"createdTime":1752073953000,"updatedTime":1752073953000,"contributors":[{"name":"tuonioooo","username":"tuonioooo","email":"daizhaoman@sina.com","commits":1,"url":"https://github.com/tuonioooo"}]},"readingTime":{"minutes":2.94,"words":881},"filePathRelative":"linux/系统管理与监控/iptables.md","excerpt":"\\n<p>iptables 是 Linux 系统中的网络防火墙管理工具，用于配置内核的 netfilter 框架。它允许系统管理员定义规则来控制网络流量的进出，实现包过滤、网络地址转换（NAT）、端口转发等功能。</p>\\n<h2>iptables 基本概念</h2>\\n<p>iptables 通过表（tables）和链（chains）来组织规则。主要包含四个表：</p>\\n<ul>\\n<li><strong>filter表</strong>：默认表，用于包过滤（允许/拒绝）</li>\\n<li><strong>nat表</strong>：用于网络地址转换</li>\\n<li><strong>mangle表</strong>：用于修改数据包</li>\\n<li><strong>raw表</strong>：用于配置数据包，使其免于被连接跟踪系统处理</li>\\n</ul>","autoDesc":true}`);export{h as comp,c as data};
