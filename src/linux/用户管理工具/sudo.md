---
title: sudo命令-授权执行
category:
  - Linux命令
tag:
  - 用户管理
  - 系统管理
  - 权限控制
  - 安全
date: 2022-08-25

---

# sudo命令

## 命令简介

`sudo` 命令来自英文词组 "super user do" 的缩写，中文译为"超级用户才能干的事"，其功能是授权普通用户执行管理员命令。

## 背景和作用

使用 `su` 命令变更用户身份虽然好用，但是需要将管理员的账户密码告诉他人，总感觉心里不踏实，幸好有了 `sudo` 服务。

使用 `sudo` 服务可以授权某个指定的用户执行某些指定的命令。通过在满足工作需求的前提下尽可能少放权，可保证服务器的安全。

## 配置方式

配置 `sudo` 服务时，可以使用以下两种方式：

1. **直接编辑配置文件**：编辑 `/etc/sudoers` 文件
2. **使用 visudo 命令**：执行 `visudo` 命令进行设置（推荐）

配置完成后，普通用户便能够使用 `sudo` 命令进行操作了。

## 语法格式

```bash
sudo [参数] [命令]
```

## 常用参数

| 参数 | 说明 |
|------|------|
| `-A` | 使用图形化界面读取用户密码值 |
| `-b` | 将要执行的命令放在后台执行 |
| `-p` | 设置需要密码验证时的提示语 |
| `-r` | 设置新的 SELinux 角色 |
| `-l` | 列出当前用户可执行的命令 |
| `-u` | 指定以某个用户身份执行命令 |

## 参考示例

### 1. 查看当前用户的 sudo 权限

查看当前用户有哪些被 sudo 服务授权的命令：

```bash
[linuxprobe@linuxcool ~]$ sudo -l
```

### 2. 以指定用户身份执行命令

使用某个被 sudo 服务允许的用户身份来执行管理员的重启命令：

```bash
[root@linuxcool ~]# sudo -u linuxprobe "reboot"
```

### 3. 使用 sudo 执行管理员命令

使用当前用户身份，基于 sudo 命令来执行管理员的重启命令：

```bash
[root@linuxcool ~]# sudo reboot
```

## 安全优势

- **最小权限原则**：只授予用户执行特定任务所需的最小权限
- **密码保护**：无需共享 root 密码
- **审计跟踪**：可以记录用户执行的命令
- **灵活配置**：可以精确控制用户能执行的命令

## 注意事项

1. 配置 sudo 时建议使用 `visudo` 命令，它会检查语法错误
2. 不要随意给用户过多的 sudo 权限
3. 定期检查和更新 sudo 配置
4. 注意日志记录和监控 sudo 的使用情况

---

